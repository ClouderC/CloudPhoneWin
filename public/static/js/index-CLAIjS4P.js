var S=(h,g,p)=>new Promise((d,t)=>{var l=r=>{try{f(p.next(r))}catch(v){t(v)}},u=r=>{try{f(p.throw(r))}catch(v){t(v)}},f=r=>r.done?d(r.value):Promise.resolve(r.value).then(l,u);f((p=p.apply(h,g)).next())});import{aa as N,v as R,r as V,e as x,o as T,p as q,q as C,H as e,R as n,G as w,F as A,D as s,S as y,ae as E,U as F,Q as G,a8 as D,_ as Q}from"./index-DqYxAufE.js";const j=h=>N.request("get","/api/login-log/list",{params:h}),J={class:"main"},K={class:"search-form"},O={class:"pagination-container"},W=R({name:"SystemLoginLog",__name:"index",setup(h){const g=V(!1),p=V([]),d=V(null),t=x({username:"",ip:"",status:null}),l=x({page:1,pageSize:10,total:0}),u=()=>S(null,null,function*(){var m,a,b;g.value=!0;try{const i={page:l.page,pageSize:l.pageSize,username:t.username||void 0,ip:t.ip||void 0,status:(m=t.status)!=null?m:void 0,startTime:((a=d.value)==null?void 0:a[0])||void 0,endTime:((b=d.value)==null?void 0:b[1])||void 0},c=yield j(i);c.success?(p.value=c.data.list,l.total=c.data.total):D.error(c.message||"获取登录日志失败")}catch(i){console.error("获取登录日志失败:",i),D.error("获取登录日志失败")}finally{g.value=!1}}),f=()=>{l.page=1,u()},r=()=>{t.username="",t.ip="",t.status=null,d.value=null,l.page=1,u()},v=m=>{l.pageSize=m,l.page=1,u()},Y=m=>{l.page=m,u()};return T(()=>{u()}),(m,a)=>{const b=s("el-input"),i=s("el-form-item"),c=s("el-option"),k=s("el-select"),U=s("el-date-picker"),z=s("el-button"),L=s("el-form"),_=s("el-table-column"),M=s("el-tag"),H=s("el-table"),I=s("el-pagination"),B=s("el-card"),P=E("loading");return C(),q("div",J,[e(B,{shadow:"never"},{header:n(()=>a[6]||(a[6]=[w("div",{class:"card-header"},[w("span",null,"登录日志")],-1)])),default:n(()=>[w("div",K,[e(L,{model:t,inline:""},{default:n(()=>[e(i,{label:"用户名"},{default:n(()=>[e(b,{modelValue:t.username,"onUpdate:modelValue":a[0]||(a[0]=o=>t.username=o),placeholder:"请输入用户名",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(i,{label:"IP地址"},{default:n(()=>[e(b,{modelValue:t.ip,"onUpdate:modelValue":a[1]||(a[1]=o=>t.ip=o),placeholder:"请输入IP地址",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(i,{label:"状态"},{default:n(()=>[e(k,{modelValue:t.status,"onUpdate:modelValue":a[2]||(a[2]=o=>t.status=o),placeholder:"请选择状态",clearable:"",style:{width:"120px"}},{default:n(()=>[e(c,{label:"成功",value:1}),e(c,{label:"失败",value:0})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"时间范围"},{default:n(()=>[e(U,{modelValue:d.value,"onUpdate:modelValue":a[3]||(a[3]=o=>d.value=o),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",style:{width:"350px"}},null,8,["modelValue"])]),_:1}),e(i,null,{default:n(()=>[e(z,{onClick:f},{default:n(()=>a[7]||(a[7]=[y("搜索")])),_:1}),e(z,{onClick:r},{default:n(()=>a[8]||(a[8]=[y("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),A((C(),F(H,{data:p.value,style:{width:"100%"},border:""},{default:n(()=>[e(_,{prop:"id",label:"ID",width:"80"}),e(_,{prop:"username",label:"用户名",width:"120"}),e(_,{prop:"ip",label:"IP地址",width:"140"}),e(_,{prop:"status",label:"状态",width:"80"},{default:n(({row:o})=>[e(M,{type:o.status===1?"success":"danger"},{default:n(()=>[y(G(o.status===1?"成功":"失败"),1)]),_:2},1032,["type"])]),_:1}),e(_,{prop:"message",label:"消息","min-width":"200"}),e(_,{prop:"userAgent",label:"用户代理","min-width":"300","show-overflow-tooltip":""}),e(_,{prop:"createdAt",label:"登录时间",width:"180"})]),_:1},8,["data"])),[[P,g.value]]),w("div",O,[e(I,{"current-page":l.page,"onUpdate:currentPage":a[4]||(a[4]=o=>l.page=o),"page-size":l.pageSize,"onUpdate:pageSize":a[5]||(a[5]=o=>l.pageSize=o),"page-sizes":[10,20,50,100],total:l.total,layout:"total, sizes, prev, pager, next",onSizeChange:v,onCurrentChange:Y},null,8,["current-page","page-size","total"])])]),_:1})])}}}),$=Q(W,[["__scopeId","data-v-36cff16c"]]);export{$ as default};
