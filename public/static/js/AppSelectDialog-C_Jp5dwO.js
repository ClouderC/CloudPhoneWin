var _=(c,r,o)=>new Promise((i,t)=>{var n=a=>{try{l(o.next(a))}catch(s){t(s)}},p=a=>{try{l(o.throw(a))}catch(s){t(s)}},l=a=>a.done?i(a.value):Promise.resolve(a.value).then(n,p);l((o=o.apply(c,r)).next())});import{g as k}from"./app-CvfiZxnR.js";import{v as S,c as V,r as f,A as B,o as L,U as g,q as b,R as h,F as M,ae as N,D as m,H as u,a8 as w,_ as R}from"./index-DqYxAufE.js";const U=S({name:"AppSelectDialog",__name:"AppSelectDialog",props:{visible:{type:Boolean}},emits:["update:visible","select"],setup(c,{expose:r,emit:o}){const i=c,t=o,n=V({get:()=>i.visible,set:e=>t("update:visible",e)}),p=f([]),l=f(!1),a=()=>_(null,null,function*(){try{l.value=!0;const e=yield k({page:1,pageSize:100,appType:"用户应用"});e.code===0?p.value=[...e.data.list].reverse():w.error(e.message||"获取应用列表失败")}catch(e){console.error("获取应用列表失败:",e),w.error("获取应用列表失败")}finally{l.value=!1}});B(()=>i.visible,e=>{e&&a()});const s=()=>{t("update:visible",!1)},A=e=>{t("select",e),s()};return L(()=>{i.visible&&a()}),r({refresh:a}),(e,v)=>{const d=m("el-table-column"),x=m("el-table"),y=m("el-dialog"),C=N("loading");return b(),g(y,{modelValue:n.value,"onUpdate:modelValue":v[0]||(v[0]=D=>n.value=D),title:"选择应用",width:"600px","close-on-click-modal":!1,onClose:s},{default:h(()=>[M((b(),g(x,{data:p.value,style:{width:"100%"},height:"400",onRowClick:A},{default:h(()=>[u(d,{prop:"name",label:"应用名称"}),u(d,{prop:"packageName",label:"包名"}),u(d,{prop:"version",label:"版本",width:"100"})]),_:1},8,["data"])),[[C,l.value]])]),_:1},8,["modelValue"])}}}),F=R(U,[["__scopeId","data-v-eaabb687"]]);export{F as default};
